<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>3D SMART STORE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background-color: #f3f4f6; font-family: -apple-system, sans-serif; }
        .item-card { background: white; border-radius: 20px; padding: 16px; border: 1px solid transparent; }
        .item-card:active { transform: scale(0.96); background: #fffbeb; }
        .cat-btn { background: white; border: 1px solid #e5e7eb; padding: 8px 16px; border-radius: 12px; font-size: 11px; font-weight: 700; white-space: nowrap; transition: all 0.2s; }
        .cat-btn.active { background: #f4b324; color: white; border-color: #f4b324; }
        .search-area { background: #18181b; padding: 20px; border-radius: 0 0 24px 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

        /* Styles for Modal */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: flex-end; /* –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∑—É */
            z-index: 1000; opacity: 0; transform: translateY(100%);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .modal.active { opacity: 1; transform: translateY(0%); }
        .modal-content {
            background: white; border-radius: 24px 24px 0 0;
            width: 100%; max-width: 500px; /* –û–±–º–µ–∂–µ–Ω–Ω—è —à–∏—Ä–∏–Ω–∏ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤ */
            padding: 20px; box-shadow: 0 -10px 30px rgba(0,0,0,0.2);
            transform: translateY(20px); opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal.active .modal-content { transform: translateY(0); opacity: 1; }
        .close-btn { background: #e5e7eb; border-radius: 50%; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; font-size: 20px; position: absolute; top: 15px; right: 15px; }
    </style>
</head>
<body class="pb-32">

    <div class="search-area sticky top-0 z-50">
        <div class="flex items-center justify-between mb-4">
            <span class="text-[10px] font-black uppercase text-zinc-500 tracking-widest">3D_PRO_MARKET</span>
            <div id="loader" class="hidden w-3 h-3 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"></div>
        </div>
        <input id="searchInput" type="text" oninput="filterCatalog()" placeholder="–©–æ –≤–∏ —à—É–∫–∞—î—Ç–µ?" 
            class="w-full bg-zinc-800 border-none rounded-xl p-4 text-white outline-none focus:ring-2 focus:ring-yellow-500 transition-all text-sm">
    </div>

    <div class="flex gap-2 overflow-x-auto p-4 no-scrollbar">
        <button onclick="setCategory('all', this)" class="cat-btn active">–í—Å—ñ</button>
        <button onclick="setCategory('decor', this)" class="cat-btn">–î–µ–∫–æ—Ä</button>
        <button onclick="setCategory('toys', this)" class="cat-btn">–Ü–≥—Ä–∞—à–∫–∏</button>
        <button onclick="setCategory('tech', this)" class="cat-btn">–¢–µ—Ö–Ω—ñ—á–Ω–µ</button>
        <button onclick="setCategory('gadgets', this)" class="cat-btn">–ì–∞–¥–∂–µ—Ç–∏</button>
    </div>

    <div class="px-4">
        <h2 id="view-title" class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-4 ml-2">–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥</h2>
        <div id="grid" class="grid grid-cols-2 gap-4">
            </div>
        
        <div id="not-found" class="hidden text-center py-10 opacity-40">
            <p class="text-4xl mb-2">üî≠</p>
            <p class="text-sm font-bold">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</p>
        </div>
    </div>

    <div id="footer" class="fixed bottom-0 left-0 right-0 p-6 bg-white/90 backdrop-blur-xl border-t hidden z-50">
        <button onclick="sendOrder()" class="w-full bg-[#f4b324] text-white py-4 rounded-2xl font-black text-sm uppercase flex justify-between px-8 shadow-xl">
            <span>–û–§–û–†–ú–ò–¢–ò –ó–ê–ú–û–í–õ–ï–ù–ù–Ø</span>
            <span id="total">0 ‚Ç¥</span>
        </button>
    </div>

    <div id="itemModal" class="modal">
        <div class="modal-content relative">
            <button class="close-btn absolute top-4 right-4" onclick="closeModal()">‚úï</button>
            <div class="text-6xl text-center mb-4" id="modal-icon"></div>
            <h3 class="text-xl font-bold text-center mb-2" id="modal-name"></h3>
            <p class="text-sm text-zinc-600 text-center mb-4" id="modal-description">–¢—É—Ç –±—É–¥–µ –¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ç–æ–≤–∞—Ä—É, –º–∞—Ç–µ—Ä—ñ–∞–ª —Ç–∞ —á–∞—Å –¥—Ä—É–∫—É.</p>
            <p class="text-2xl font-black text-yellow-600 text-center mb-6" id="modal-price"></p>
            <button onclick="addItemToCartFromModal()" class="w-full bg-[#f4b324] text-white py-4 rounded-xl font-bold text-sm uppercase shadow-lg">–î–û–î–ê–¢–ò –í –ö–û–®–ò–ö</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready(); // –í–∞–∂–ª–∏–≤–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ tg.ready()

        let cart = [];
        let total = 0;
        let currentCategory = 'all';
        let selectedItem = null; // –î–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–∏–±—Ä–∞–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É –≤ –º–æ–¥–∞–ª—å–Ω–æ–º—É –≤—ñ–∫–Ω—ñ

        const db = [
            { id: 1, name: "Flexi Dragon", price: 450, icon: "üêâ", cat: "toys", description: "–ì–Ω—É—á–∫–∏–π —à–∞—Ä–Ω—ñ—Ä–Ω–∏–π –¥—Ä–∞–∫–æ–Ω, —ñ–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è —ñ–≥–æ—Ä —Ç–∞ —è–∫ –µ–ª–µ–º–µ–Ω—Ç –¥–µ–∫–æ—Ä—É. –î—Ä—É–∫—É—î—Ç—å—Å—è –∑ PLA-–ø–ª–∞—Å—Ç–∏–∫—É." },
            { id: 2, name: "Geometric Vase", price: 320, icon: "üè∫", cat: "decor", description: "–°—É—á–∞—Å–Ω–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∞ –≤–∞–∑–∞, —á—É–¥–æ–≤–æ –¥–æ–ø–æ–≤–Ω–∏—Ç—å –±—É–¥—å-—è–∫–∏–π —ñ–Ω—Ç–µ—Ä'—î—Ä. –ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –∫–∞—à–ø–æ." },
            { id: 3, name: "Iron Man Mask", price: 2400, icon: "‚õëÔ∏è", cat: "toys", description: "–ö–æ–ø—ñ—è –º–∞—Å–∫–∏ –ó–∞–ª—ñ–∑–Ω–æ—ó –õ—é–¥–∏–Ω–∏ —É –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—É –≤–µ–ª–∏—á–∏–Ω—É. –Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ—Å–ø–ª–µ—é –∞–±–æ –∫–æ–ª–µ–∫—Ü—ñ—ó." },
            { id: 4, name: "Phone Stand", price: 140, icon: "üì±", cat: "gadgets", description: "–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ –ø—ñ–¥—Å—Ç–∞–≤–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω—É. –ó—Ä—É—á–Ω–æ –¥–∏–≤–∏—Ç–∏—Å—è –≤—ñ–¥–µ–æ –∞–±–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏. –ú—ñ—Ü–Ω–∏–π PETG-–ø–ª–∞—Å—Ç–∏–∫." },
            { id: 5, name: "Laptop Riser", price: 550, icon: "üíª", cat: "gadgets", description: "–ï—Ä–≥–æ–Ω–æ–º—ñ—á–Ω–∞ –ø—ñ–¥—Å—Ç–∞–≤–∫–∞ –¥–ª—è –Ω–æ—É—Ç–±—É–∫–∞, —â–æ –ø–æ–∫—Ä–∞—â—É—î –æ—Ö–æ–ª–æ–¥–∂–µ–Ω–Ω—è —Ç–∞ –ø–æ—Å—Ç–∞–≤—É. –ù–∞–¥—ñ–π–Ω–∞ —Ç–∞ —Å—Ç—ñ–π–∫–∞." },
            { id: 6, name: "Gear Set (5pcs)", price: 180, icon: "‚öôÔ∏è", cat: "tech", description: "–ù–∞–±—ñ—Ä –∑ 5 —Ä—ñ–∑–Ω–∏—Ö —à–µ—Å—Ç–µ—Ä–µ–Ω—å –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø—É–≤–∞–Ω–Ω—è –∞–±–æ —Ä–µ–º–æ–Ω—Ç—É –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤. –í–∏—Å–æ–∫–æ–º—ñ—Ü–Ω–∏–π ABS-–ø–ª–∞—Å—Ç–∏–∫." },
            { id: 7, name: "Planter Pot", price: 210, icon: "ü™¥", cat: "decor", description: "–°—Ç–∏–ª—å–Ω–∏–π –≥–æ—Ä—â–∏–∫ –¥–ª—è —Ä–æ—Å–ª–∏–Ω. –û—Ä–≥–∞–Ω—ñ—á–Ω–∏–π –¥–∏–∑–∞–π–Ω. –Ñ –¥—Ä–µ–Ω–∞–∂–Ω—ñ –æ—Ç–≤–æ—Ä–∏." },
            { id: 8, name: "Skull Lamp", price: 900, icon: "üí°", cat: "decor", description: "–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∞ –Ω–∞—Å—Ç—ñ–ª—å–Ω–∞ –ª–∞–º–ø–∞ —É —Ñ–æ—Ä–º—ñ —á–µ—Ä–µ–ø–∞. –°—Ç–≤–æ—Ä—é—î —É–Ω—ñ–∫–∞–ª—å–Ω—É –∞—Ç–º–æ—Å—Ñ–µ—Ä—É." }
        ];

        window.onload = () => filterCatalog();

        function setCategory(cat, el) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            currentCategory = cat;
            filterCatalog();
            tg.HapticFeedback.selectionChanged();
        }

        function filterCatalog() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const grid = document.getElementById('grid');
            const notFound = document.getElementById('not-found');
            
            const filtered = db.filter(item => {
                const matchCat = currentCategory === 'all' || item.cat === currentCategory;
                const matchSearch = item.name.toLowerCase().includes(query);
                return matchCat && matchSearch;
            });

            grid.innerHTML = '';
            if (filtered.length === 0) {
                notFound.classList.remove('hidden');
            } else {
                notFound.classList.add('hidden');
                filtered.forEach(item => {
                    grid.innerHTML += `
                        <div class="item-card shadow-sm animate-in fade-in slide-in-from-bottom-2" onclick="openModal(${item.id})">
                            <div class="text-5xl mb-3">${item.icon}</div>
                            <h3 class="text-[10px] font-black uppercase truncate text-zinc-800">${item.name}</h3>
                            <p class="text-yellow-500 font-bold text-sm mt-1">${item.price} ‚Ç¥</p>
                            <button onclick="event.stopPropagation(); add(${item.name}, ${item.price})" class="bg-yellow-500 text-white rounded-lg w-full py-2 mt-3 text-[10px] font-bold">ADD</button>
                        </div>
                    `;
                });
            }
        }

        function add(name, price) {
            cart.push({name, price});
            total += price;
            document.getElementById('footer').style.display = 'block';
            document.getElementById('total').innerText = total + ' ‚Ç¥';
            tg.HapticFeedback.impactOccurred('medium');
            closeModal(); // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –º–æ–¥–∞–ª–∫—É –ø—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è
        }

        // –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
        function openModal(id) {
            selectedItem = db.find(item => item.id === id);
            if (!selectedItem) return;

            document.getElementById('modal-icon').innerText = selectedItem.icon;
            document.getElementById('modal-name').innerText = selectedItem.name;
            document.getElementById('modal-description').innerText = selectedItem.description;
            document.getElementById('modal-price').innerText = selectedItem.price + ' ‚Ç¥';

            document.getElementById('itemModal').classList.add('active');
            tg.HapticFeedback.impactOccurred('light');
        }

        function closeModal() {
            document.getElementById('itemModal').classList.remove('active');
            selectedItem = null;
        }

        function addItemToCartFromModal() {
            if (selectedItem) {
                add(selectedItem.name, selectedItem.price);
            }
        }

        function sendOrder() {
            let msg = "üõí –ù–û–í–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø:%0A";
            cart.forEach(i => msg += `- ${i.name} (${i.price} ‚Ç¥)%0A`);
            msg += `%0A–†–ê–ó–û–ú: ${total} ‚Ç¥`;
            window.open(`https://t.me/–¢–í–Ü–ô_–õ–û–ì–Ü–ù?text=${msg}`);
        }
    </script>
</body>
</html>
