<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>3D SMART STORE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background-color: #f3f4f6; font-family: -apple-system, sans-serif; }
        .item-card { background: white; border-radius: 20px; padding: 16px; border: 1px solid transparent; }
        .item-card:active { transform: scale(0.96); background: #fffbeb; }
        .cat-btn { background: white; border: 1px solid #e5e7eb; padding: 8px 16px; border-radius: 12px; font-size: 11px; font-weight: 700; white-space: nowrap; transition: all 0.2s; }
        .cat-btn.active { background: #f4b324; color: white; border-color: #f4b324; }
        .search-area { background: #18181b; padding: 20px; border-radius: 0 0 24px 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="pb-32">

    <div class="search-area sticky top-0 z-50">
        <div class="flex items-center justify-between mb-4">
            <span class="text-[10px] font-black uppercase text-zinc-500 tracking-widest">3D_PRO_MARKET</span>
            <div id="loader" class="hidden w-3 h-3 border-2 border-yellow-500 border-t-transparent rounded-full animate-spin"></div>
        </div>
        <input id="searchInput" type="text" oninput="filterCatalog()" placeholder="–©–æ –≤–∏ —à—É–∫–∞—î—Ç–µ?" 
            class="w-full bg-zinc-800 border-none rounded-xl p-4 text-white outline-none focus:ring-2 focus:ring-yellow-500 transition-all text-sm">
    </div>

    <div class="flex gap-2 overflow-x-auto p-4 no-scrollbar">
        <button onclick="setCategory('all', this)" class="cat-btn active">–í—Å—ñ</button>
        <button onclick="setCategory('decor', this)" class="cat-btn">–î–µ–∫–æ—Ä</button>
        <button onclick="setCategory('toys', this)" class="cat-btn">–Ü–≥—Ä–∞—à–∫–∏</button>
        <button onclick="setCategory('tech', this)" class="cat-btn">–¢–µ—Ö–Ω—ñ—á–Ω–µ</button>
        <button onclick="setCategory('gadgets', this)" class="cat-btn">–ì–∞–¥–∂–µ—Ç–∏</button>
    </div>

    <div class="px-4">
        <h2 id="view-title" class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-4 ml-2">–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥</h2>
        <div id="grid" class="grid grid-cols-2 gap-4">
            </div>
        
        <div id="not-found" class="hidden text-center py-10 opacity-40">
            <p class="text-4xl mb-2">üî≠</p>
            <p class="text-sm font-bold">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</p>
        </div>
    </div>

    <div id="footer" class="fixed bottom-0 left-0 right-0 p-6 bg-white/90 backdrop-blur-xl border-t hidden z-50">
        <button onclick="sendOrder()" class="w-full bg-[#f4b324] text-white py-4 rounded-2xl font-black text-sm uppercase flex justify-between px-8 shadow-xl">
            <span>–û–§–û–†–ú–ò–¢–ò</span>
            <span id="total">0 ‚Ç¥</span>
        </button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let cart = [];
        let total = 0;
        let currentCategory = 'all';

        const db = [
            { name: "Flexi Dragon", price: 450, icon: "üêâ", cat: "toys" },
            { name: "Geometric Vase", price: 320, icon: "üè∫", cat: "decor" },
            { name: "Iron Man Mask", price: 2400, icon: "‚õëÔ∏è", cat: "toys" },
            { name: "Phone Stand", price: 140, icon: "üì±", cat: "gadgets" },
            { name: "Laptop Riser", price: 550, icon: "üíª", cat: "gadgets" },
            { name: "Gear Set", price: 180, icon: "‚öôÔ∏è", cat: "tech" },
            { name: "Planter Pot", price: 210, icon: "ü™¥", cat: "decor" },
            { name: "Skull Lamp", price: 900, icon: "üí°", cat: "decor" }
        ];

        window.onload = () => filterCatalog();

        function setCategory(cat, el) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            currentCategory = cat;
            filterCatalog();
            tg.HapticFeedback.selectionChanged();
        }

        function filterCatalog() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const grid = document.getElementById('grid');
            const notFound = document.getElementById('not-found');
            
            const filtered = db.filter(item => {
                const matchCat = currentCategory === 'all' || item.cat === currentCategory;
                const matchSearch = item.name.toLowerCase().includes(query);
                return matchCat && matchSearch;
            });

            grid.innerHTML = '';
            if (filtered.length === 0) {
                notFound.classList.remove('hidden');
            } else {
                notFound.classList.add('hidden');
                filtered.forEach(item => {
                    grid.innerHTML += `
                        <div class="item-card shadow-sm animate-in fade-in slide-in-from-bottom-2">
                            <div class="text-5xl mb-3">${item.icon}</div>
                            <h3 class="text-[10px] font-black uppercase truncate">${item.name}</h3>
                            <p class="text-yellow-500 font-bold text-sm mt-1">${item.price} ‚Ç¥</p>
                            <button onclick="add('${item.name}', ${item.price})" class="bg-yellow-500 text-white rounded-lg w-full py-2 mt-3 text-[10px] font-bold">ADD</button>
                        </div>
                    `;
                });
            }
        }

        function add(name, price) {
            cart.push({name, price});
            total += price;
            document.getElementById('footer').style.display = 'block';
            document.getElementById('total').innerText = total + ' ‚Ç¥';
            tg.HapticFeedback.impactOccurred('medium');
        }

        function sendOrder() {
            let msg = "üõí –ù–û–í–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø:%0A";
            cart.forEach(i => msg += `- ${i.name} (${i.price} ‚Ç¥)%0A`);
            msg += `%0A–†–ê–ó–û–ú: ${total} ‚Ç¥`;
            window.open(`https://t.me/–¢–í–Ü–ô_–õ–û–ì–Ü–ù?text=${msg}`);
        }
    </script>
</body>
</html>
