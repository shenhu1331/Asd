<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UA 3D –ü–æ—à—É–∫</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body { background-color: #121212; color: #e0e0e0; font-family: sans-serif; }
        .card { background-color: #1e1e1e; border: 1px solid #333; border-radius: 15px; overflow: hidden; margin-bottom: 20px; }
        .card-title { color: #ffc107; font-weight: bold; }
        .btn-warning { border-radius: 10px; font-weight: 600; }
        .badge-category { background-color: #333; color: #aaa; font-size: 0.7rem; }
        .model-img { height: 200px; object-fit: cover; width: 100%; border-bottom: 1px solid #333; }
        .search-bar { position: sticky; top: 0; z-index: 1000; background: #121212; padding: 15px 0; }
    </style>
</head>
<body>

<div class="container pb-5">
    <div class="search-bar">
        <h4 class="text-center mb-3">üì¶ <span class="text-warning">UA 3D</span> –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä</h4>
        <div class="input-group">
            <span class="input-group-text bg-dark border-secondary text-white"><i class="bi bi-search"></i></span>
            <input type="text" id="searchInput" class="form-control bg-dark border-secondary text-white" placeholder="–ü–æ—à—É–∫ —É –∫–∞—Ç–∞–ª–æ–∑—ñ...">
        </div>
    </div>

    <div id="catalog" class="row">
        <div class="text-center mt-5">
            <div class="spinner-border text-warning" role="status"></div>
            <p class="mt-2 text-muted">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–∞–∑–∏ –º–æ–¥–µ–ª–µ–π...</p>
        </div>
    </div>
</div>

<script>
    // 1. –í–°–¢–ê–í–¢–ï –í–ê–® ID –¢–ê–ë–õ–ò–¶–Ü –°–Æ–î–ò
    const SHEET_ID = '–í–ê–®_ID_–ó_–ü–û–°–ò–õ–ê–ù–ù–Ø_–¢–ê–ë–õ–ò–¶–Ü'; 
    const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json`;

    async function loadModels() {
        try {
            const response = await fetch(url);
            const text = await response.text();
            const json = JSON.parse(text.substr(47).slice(0, -2));
            const rows = json.table.rows;
            const catalog = document.getElementById('catalog');
            catalog.innerHTML = '';

            rows.forEach((row, index) => {
                // –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–æ–Ω–æ–∫: A:–ù–∞–∑–≤–∞, B:–û–ø–∏—Å, C:–ö–∞—Ç–µ–≥–æ—Ä—ñ—è, D:–ü–æ—Å–∏–ª–∞–Ω–Ω—è, E:–§–æ—Ç–æ
                const name = row.c[0] ? row.c[0].v : '–ë–µ–∑ –Ω–∞–∑–≤–∏';
                const desc = row.c[1] ? row.c[1].v : '';
                const cat  = row.c[2] ? row.c[2].v : '–ó–∞–≥–∞–ª—å–Ω–µ';
                const link = row.c[3] ? row.c[3].v : '#';
                const img  = row.c[4] ? row.c[4].v : 'https://via.placeholder.com/400x200?text=No+Image';

                const cardHtml = `
                    <div class="col-12 col-md-6 model-card" data-name="${name.toLowerCase()}">
                        <div class="card shadow">
                            <img src="${img}" class="model-img" alt="${name}">
                            <div class="card-body">
                                <span class="badge badge-category mb-2">${cat}</span>
                                <h5 class="card-title">${name}</h5>
                                <p class="card-text small text-muted">${desc}</p>
                                <div class="d-grid shadow-sm">
                                    <a href="${link}" target="_blank" class="btn btn-warning">
                                        <i class="bi bi-download me-2"></i>–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ STL
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                catalog.innerHTML += cardHtml;
            });
        } catch (e) {
            document.getElementById('catalog').innerHTML = '<p class="text-center text-danger">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–∞–∑–∏. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—é —Ç–∞–±–ª–∏—Ü—ñ.</p>';
        }
    }

    // –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫ –ø–æ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
    document.getElementById('searchInput').addEventListener('input', function(e) {
        const text = e.target.value.toLowerCase();
        document.querySelectorAll('.model-card').forEach(card => {
            const name = card.getAttribute('data-name');
            card.style.display = name.includes(text) ? 'block' : 'none';
        });
    });

    loadModels();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
