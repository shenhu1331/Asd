<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D UA HUB</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #0b0b0b; color: #eee; font-family: sans-serif; padding-bottom: 20px; }
        .nav-pills .nav-link { color: #888; border: 1px solid #333; margin: 5px; border-radius: 10px; font-size: 0.9rem; }
        .nav-pills .nav-link.active { background: #ffc107; color: #000; font-weight: bold; border: none; }
        .card { background: #161616; border: 1px solid #333; border-radius: 15px; height: 100%; transition: 0.2s; }
        .img-box { height: 140px; background: #222; border-radius: 12px 12px 0 0; overflow: hidden; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; }
        .btn-stl { background: #ffc107; color: #000; font-weight: bold; font-size: 0.8rem; border-radius: 8px; border: none; }
        .btn-stl:hover { background: #e5ad06; }
    </style>
</head>
<body>

<div class="container py-3">
    <h5 class="text-center text-warning mb-4 fw-bold">3D UA HUB üì¶</h5>

    <ul class="nav nav-pills justify-content-center mb-4" id="pills-tab" role="tablist">
        <li class="nav-item">
            <button class="nav-link active" onclick="showTab('ua')">üá∫üá¶ –ú–æ—ó –º–æ–¥–µ–ª—ñ</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" onclick="showTab('trends')">üî• –¢—Ä–µ–Ω–¥–∏</button>
        </li>
    </ul>

    <div id="ua-list" class="row g-2">
        <div class="text-center py-5"><div class="spinner-border text-warning"></div></div>
    </div>

    <div id="trends-list" class="row g-2" style="display:none">
        <div class="text-center py-5 text-muted small">–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ç—Ä–µ–Ω–¥–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ...</div>
    </div>
</div>

<script>
    // –¢–≤—ñ–π ID –≤–∂–µ —Ç—É—Ç!
    const SHEET_ID = '1fAhuUSAwplm2RT8rMxeHUdyMLTyxaAMfvTIwrkY5AME'; 

    async function loadData(sheetName, targetId) {
        try {
            const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${sheetName}`;
            const res = await fetch(url);
            const text = await res.text();
            // –ß–∏—Å—Ç–∏–º–æ JSON –≤—ñ–¥ –≥—É–≥–ª—ñ–≤—Å—å–∫–æ–≥–æ —Å–º—ñ—Ç—Ç—è
            const json = JSON.parse(text.substring(text.indexOf("{"), text.lastIndexOf("}") + 1));
            const items = json.table.rows;
            
            const container = document.getElementById(targetId);
            if (items.length === 0) {
                container.innerHTML = '<div class="text-center p-4 text-muted">–¢—É—Ç –ø–æ–∫–∏ –ø–æ—Ä–æ–∂–Ω—å–æ</div>';
                return;
            }

            container.innerHTML = items.map(r => {
                const title = r.c[0] ? r.c[0].v : '–ë–µ–∑ –Ω–∞–∑–≤–∏';
                const link = r.c[3] ? r.c[3].v : '#';
                const img = r.c[4] ? r.c[4].v : 'https://via.placeholder.com/300x200?text=No+Image';
                
                return `
                <div class="col-6 col-md-4">
                    <div class="card p-2 shadow-sm">
                        <div class="img-box mb-2">
                            <img src="${img}" onerror="this.src='https://via.placeholder.com/300x200?text=Error'">
                        </div>
                        <div class="small text-truncate mb-2 px-1" style="font-weight: 600;">${title}</div>
                        <a href="${link}" target="_blank" class="btn btn-stl w-100 py-1">STL</a>
                    </div>
                </div>`;
            }).join('');
        } catch (e) {
            console.error("–ü–æ–º–∏–ª–∫–∞:", e);
            document.getElementById(targetId).innerHTML = '<div class="text-center p-4 text-danger small">–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—é —Ç–∞–±–ª–∏—Ü—ñ!</div>';
        }
    }

    function showTab(tab) {
        const uaList = document.getElementById('ua-list');
        const trendsList = document.getElementById('trends-list');
        const buttons = document.querySelectorAll('.nav-link');

        if (tab === 'ua') {
            uaList.style.display = 'flex';
            trendsList.style.display = 'none';
            buttons[0].classList.add('active');
            buttons[1].classList.remove('active');
        } else {
            uaList.style.display = 'none';
            trendsList.style.display = 'flex';
            buttons[0].classList.remove('active');
            buttons[1].classList.add('active');
            loadData('Trends', 'trends-list');
        }
    }

    // –ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫
    loadData('Sheet1', 'ua-list');
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
