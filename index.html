<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>3D Order System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background-color: #f0f0f0; font-family: -apple-system, sans-serif; -webkit-tap-highlight-color: transparent; }
        .item-card { background: #fff; border-radius: 16px; padding: 12px; text-align: center; position: relative; transition: all 0.2s; }
        .add-btn { background-color: #f4b324; color: white; border-radius: 10px; padding: 8px; font-weight: 700; width: 100%; margin-top: 10px; font-size: 12px; }
        .search-results { display: none; margin-top: 10px; }
    </style>
</head>
<body class="pb-32">

    <div class="m-4 p-4 bg-zinc-900 rounded-2xl shadow-xl text-white">
        <div class="flex items-center justify-between mb-3">
            <span class="text-[10px] font-bold uppercase opacity-50 tracking-[0.2em]">Internal Search Engine</span>
            <div id="status" class="text-[9px] text-green-500 font-bold uppercase">System Ready</div>
        </div>
        <div class="flex gap-2">
            <input id="q" type="text" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É (–Ω–∞–ø—Ä. Vase)..." 
                class="flex-1 bg-zinc-800 border-none rounded-lg p-3 text-sm outline-none text-white focus:ring-1 focus:ring-yellow-500">
            <button onclick="internalSearch()" class="bg-yellow-500 text-black px-4 rounded-lg font-black text-xs uppercase transition-transform active:scale-90">–ü–æ—à—É–∫</button>
        </div>
    </div>

    <div id="search-section" class="px-4 hidden">
        <h3 class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 pl-2">–ó–Ω–∞–π–¥–µ–Ω–æ –≤ –≥–ª–æ–±–∞–ª—å–Ω—ñ–π –±–∞–∑—ñ:</h3>
        <div id="results-grid" class="grid grid-cols-2 gap-3 mb-6">
            </div>
        <hr class="border-zinc-300 mb-6">
    </div>

    <div class="px-4">
        <h3 class="text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 pl-2">–ù–∞—è–≤–Ω—ñ –ø—Ä–µ—Å–µ—Ç–∏:</h3>
        <div class="grid grid-cols-2 gap-3">
            <div class="item-card shadow-sm">
                <div class="text-4xl mb-2">üêâ</div>
                <div class="text-xs font-bold truncate">Flexi Dragon</div>
                <div class="text-yellow-500 font-bold text-sm">400 ‚Ç¥</div>
                <button onclick="addToCart('Flexi Dragon', 400)" class="add-btn uppercase">–î–æ–¥–∞—Ç–∏</button>
            </div>
            <div class="item-card shadow-sm">
                <div class="text-4xl mb-2">‚öôÔ∏è</div>
                <div class="text-xs font-bold truncate">Tech Gear</div>
                <div class="text-yellow-500 font-bold text-sm">150 ‚Ç¥</div>
                <button onclick="addToCart('Tech Gear', 150)" class="add-btn uppercase">–î–æ–¥–∞—Ç–∏</button>
            </div>
        </div>
    </div>

    <div id="footer-btn" class="fixed bottom-0 left-0 right-0 p-4 bg-white/80 backdrop-blur-md border-t border-zinc-200 hidden z-50">
        <button onclick="sendOrder()" class="w-full bg-[#f4b324] text-white py-4 rounded-xl font-bold text-sm uppercase tracking-widest flex justify-center items-center gap-2 shadow-lg active:scale-95 transition-all">
            –û—Ñ–æ—Ä–º–∏—Ç–∏ (<span id="total-price">0</span> ‚Ç¥)
        </button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let cart = [];
        let total = 0;

        // –Ü–º—ñ—Ç–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö Thangs –¥–ª—è –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –ø–æ—à—É–∫—É
        const mockDatabase = [
            { name: "Geometric Vase", price: 350, icon: "üè∫" },
            { name: "Skull Dice Tower", price: 600, icon: "üíÄ" },
            { name: "Phone Stand", price: 120, icon: "üì±" },
            { name: "Lithophane Lamp", price: 800, icon: "üí°" },
            { name: "Cable Organizer", price: 90, icon: "üîå" }
        ];

        function internalSearch() {
            const query = document.getElementById('q').value.toLowerCase();
            const resultsGrid = document.getElementById('results-grid');
            const searchSection = document.getElementById('search-section');
            const status = document.getElementById('status');

            if (!query) return;

            // –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
            status.innerText = "Searching...";
            status.className = "text-[9px] text-yellow-500 font-bold uppercase animate-pulse";

            setTimeout(() => {
                const filtered = mockDatabase.filter(item => item.name.toLowerCase().includes(query));
                
                resultsGrid.innerHTML = '';
                if (filtered.length > 0) {
                    filtered.forEach(item => {
                        resultsGrid.innerHTML += `
                            <div class="item-card shadow-md border border-yellow-500/30 animate-in fade-in zoom-in duration-300">
                                <div class="text-4xl mb-2">${item.icon}</div>
                                <div class="text-xs font-bold truncate">${item.name}</div>
                                <div class="text-yellow-600 font-bold text-sm italic">–≤—ñ–¥ ${item.price} ‚Ç¥</div>
                                <button onclick="addToCart('${item.name}', ${item.price})" class="add-btn uppercase">–ó–∞–º–æ–≤–∏—Ç–∏</button>
                            </div>
                        `;
                    });
                    searchSection.style.display = 'block';
                } else {
                    tg.showPopup({ message: "–ú–æ–¥–µ–ª—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞ –≤ –±–∞–∑—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à—É –Ω–∞–∑–≤—É." });
                }
                status.innerText = "System Ready";
                status.className = "text-[9px] text-green-500 font-bold uppercase";
            }, 800);
        }

        function addToCart(name, price) {
            cart.push({name, price});
            total += price;
            updateUI();
            tg.HapticFeedback.impactOccurred('medium');
        }

        function updateUI() {
            const footer = document.getElementById('footer-btn');
            if (total > 0) {
                footer.style.display = 'block';
                document.getElementById('total-price').innerText = total;
            }
        }

        function sendOrder() {
            let text = "–ù–û–í–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø:%0A";
            cart.forEach(i => text += `- ${i.name} (${i.price} ‚Ç¥)%0A`);
            text += `%0A–†–ê–ó–û–ú: ${total} ‚Ç¥`;
            
            const MY_USER = "–¢–í–Ü–ô_–õ–û–ì–Ü–ù"; // –í–ü–ò–®–ò –°–í–Ü–ô –ù–Ü–ö
            tg.openTelegramLink(`https://t.me/${MY_USER}?text=${text}`);
        }
    </script>
</body>
</html>
