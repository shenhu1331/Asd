<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>REAL 3D SEARCH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; }
        .search-card { background: #1e293b; border-radius: 20px; padding: 20px; margin: 10px; border: 1px solid #334155; }
        .model-item { background: #334155; border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; }
        .btn-primary { background: #38bdf8; color: #0f172a; font-weight: 800; padding: 12px; border-radius: 10px; width: 100%; transition: 0.2s; }
        .btn-primary:active { transform: scale(0.98); }
    </style>
</head>
<body>

    <div class="p-4">
        <h1 class="text-xl font-black mb-4 flex items-center gap-2">
            <span class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></span>
            GLOBAL 3D FINDER
        </h1>

        <div class="search-card">
            <p class="text-[10px] text-blue-400 font-bold uppercase mb-2">–í–≤–µ–¥—ñ—Ç—å –∑–∞–ø–∏—Ç (UA/EN):</p>
            <div class="flex gap-2">
                <input id="query" type="text" placeholder="–ù–∞–ø—Ä: Iron Man, Vase..." 
                    class="flex-1 bg-slate-900 border-none rounded-lg p-3 text-white outline-none ring-1 ring-slate-700 focus:ring-blue-500">
                <button onclick="realSearch()" class="bg-blue-500 p-3 rounded-lg">üîç</button>
            </div>
        </div>

        <div id="results-container" class="mt-6 hidden">
            <h2 class="text-xs font-bold text-slate-400 uppercase mb-3">–ó–Ω–∞–π–¥–µ–Ω–æ –≤ –º–µ—Ä–µ–∂—ñ:</h2>
            <div id="results-list"></div>
        </div>
    </div>

    <div id="order-footer" class="fixed bottom-0 left-0 right-0 p-4 bg-slate-900 border-t border-slate-800 hidden">
        <button onclick="finishOrder()" id="final-btn" class="btn-primary uppercase italic text-sm italic">
            –û–§–û–†–ú–ò–¢–ò –ó–ê–ú–û–í–õ–ï–ù–ù–Ø
        </button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let selectedModel = "";

        // –°–ª–æ–≤–Ω–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É –Ω–∞–∑–≤ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –ø–æ—à—É–∫—É
        const translate = {
            "—à–æ–ª–æ–º": "helmet", "–º–∞—Å–∫–∞": "mask", "–≤–∞–∑–∞": "vase", "–ø—ñ–¥—Å—Ç–∞–≤–∫–∞": "stand", "—ñ–≥—Ä–∞—à–∫–∞": "toy"
        };

        function realSearch() {
            let q = document.getElementById('query').value.toLowerCase().trim();
            if(!q) return;

            // –ü–µ—Ä–µ–∫–ª–∞–¥–∞—î–º–æ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –±–∞–∑
            let engQ = translate[q] || q;
            
            tg.HapticFeedback.impactOccurred('medium');
            
            // –ü–æ–∫–∞–∑—É—î–º–æ —ñ–º—ñ—Ç–∞—Ü—ñ—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ –±–∞–∑–∏
            const list = document.getElementById('results-list');
            const container = document.getElementById('results-container');
            
            container.classList.remove('hidden');
            list.innerHTML = `
                <div class="model-item animate-pulse">
                    <div>
                        <p class="text-xs font-bold text-blue-300 uppercase">–ù–∞–π–∫—Ä–∞—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</p>
                        <p class="text-lg font-black">${q.toUpperCase()}</p>
                    </div>
                    <button onclick="selectModel('${q}', 'Thingiverse')" class="bg-blue-500 text-white px-4 py-2 rounded-lg font-bold">–û–ë–†–ê–¢–ò</button>
                </div>
                
                <div class="p-4 bg-slate-800/50 rounded-xl text-[11px] text-slate-400">
                    <p class="mb-2 italic">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∏–∂—á–µ, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ —Ñ–∞–π–ª–∏ –Ω–∞ Thangs:</p>
                    <button onclick="window.open('https://thangs.com/search/${engQ}')" class="text-blue-400 underline font-bold">
                        –í–Ü–î–ö–†–ò–¢–ò –ü–û–í–ù–£ –ë–ê–ó–£ THANGS ‚Üó
                    </button>
                </div>
            `;
        }

        function selectModel(name, source) {
            selectedModel = name;
            document.getElementById('order-footer').classList.remove('hidden');
            document.getElementById('final-btn').innerText = `–ó–ê–ú–û–í–ò–¢–ò –î–†–£–ö: ${name.toUpperCase()}`;
            tg.HapticFeedback.notificationOccurred('success');
        }

        function finishOrder() {
            const MY_USER = "–¢–í–Ü–ô_–õ–û–ì–Ü–ù"; 
            const text = `–í—ñ—Ç–∞—é! –Ø –∑–Ω–∞–π—à–æ–≤ –º–æ–¥–µ–ª—å "${selectedModel}" —á–µ—Ä–µ–∑ –ø–æ—à—É–∫ —ñ —Ö–æ—á—É –∑–∞–º–æ–≤–∏—Ç–∏ —ó—ó 3D-–¥—Ä—É–∫. –î–æ–ø–æ–º–æ–∂—ñ—Ç—å –∑ –ø—Ä–æ—Ä–∞—Ö—É–Ω–∫–æ–º?`;
            tg.openTelegramLink(`https://t.me/${MY_USER}?text=${encodeURIComponent(text)}`);
        }
    </script>
</body>
</html>
